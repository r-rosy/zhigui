{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.url.js\";\nimport \"core-js/modules/web.url-search-params.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport ElementUI from 'element-ui';\nimport axios from 'axios';\nexport default {\n  data: function data() {\n    return {\n      individual: {},\n      imageUrl: '',\n      header: {\n        'Authorization': 'Bearer:' + localStorage.getItem('zhigui-token')\n      }\n    };\n  },\n  mounted: function mounted() {\n    var pointer = this;\n    axios.get('/api/v1/user/info').then(function (response) {\n      console.log(response);\n\n      if (response.status == 200) {\n        pointer.individual = response.data.data;\n      } else {\n        pointer.$message(response.data.error);\n        ElementUI.Message({\n          message: response.data.error\n        });\n        console.log(response);\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n  },\n  methods: {\n    handleAvatarSuccess: function handleAvatarSuccess(res, file) {\n      this.imageUrl = URL.createObjectURL(file.raw);\n      alert('上传成功!');\n    },\n    beforeAvatarUpload: function beforeAvatarUpload(file) {\n      var isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isLt2M) {\n        this.$message.error('上传头像图片大小不能超过 2MB!');\n      }\n\n      return isLt2M;\n    },\n    Update: function Update() {\n      var pointer = this;\n      axios.post('/api/v1/user/info', this.individual).then(function (response) {\n        console.log(response);\n\n        if (response.status == 200) {\n          alert('修改成功!');\n          pointer.$router.push('/individual');\n        } else {\n          pointer.$message(response.data.error);\n          ElementUI.Message({\n            message: response.data.error\n          });\n          console.log(response);\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA;AACA;AACA;AACAA,MADA,kBACA;AACA;AACAC,oBADA;AAEAC,kBAFA;AAGAC;AACA;AADA;AAHA;AAOA,GATA;AAUAC;AACA;AACAC;AACAC;;AACA,kCACA;AACAC;AACA,OAHA,MAGA;AACAA;AACAC;AACAC;AADA;AAGAH;AACA;AACA,KAZA,EAaAI,KAbA,CAaA;AACAJ;AACA,KAfA;AAgBA,GA5BA;AA6BAK;AACAC,uBADA,+BACAC,GADA,EACAC,IADA,EACA;AACA;AACAC;AACA,KAJA;AAKAC,sBALA,8BAKAF,IALA,EAKA;AACA;;AACA;AACA;AACA;;AACA;AACA,KAXA;AAYAG,UAZA,oBAYA;AACA;AACAZ;AACAC;;AACA,oCACA;AACAS;AACAR;AAEA,SALA,MAKA;AACAA;AACAC;AACAC;AADA;AAGAH;AACA;AACA,OAdA,EAeAI,KAfA,CAeA;AACAJ;AACA,OAjBA;AAkBA;AAhCA;AA7BA","names":["data","individual","imageUrl","header","mounted","axios","console","pointer","ElementUI","message","catch","methods","handleAvatarSuccess","res","file","alert","beforeAvatarUpload","Update"],"sourceRoot":"src/components","sources":["UpdateIndividual.vue"],"sourcesContent":["<template>\r\n<div id=\"update_individual\">\r\n    <div class=\"header w\">\r\n        <div class=\"logo\">\r\n            <img src=\"../assets/imgs/logo.png\" alt=\"\">\r\n        </div>\r\n        <div class=\"nav\">\r\n            <ul>\r\n                <li><span></span><a href=\"/index\">首页</a></li>\r\n                <li><span></span><a href=\"#\">聊聊</a></li>\r\n                <li><span></span><a href=\"tasks.html\">任务栏</a></li>\r\n                <li><span></span><a href=\"list.html\">排行榜</a></li>\r\n                <li><span></span><a href=\"/indiviual\">个人中心</a></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    <div class=\"w\">\r\n        <div class=\"inf-title\">\r\n            <span class=\"inf-title-icon\"></span>\r\n            <span class=\"inf-title-text\">我的信息</span>\r\n        </div>\r\n        <div class=\"inf\">\r\n            <div class=\"box\">\r\n                \r\n                <el-upload class=\"avatar-uploader\" :headers=\"header\" action=\"/api/v1/user/avatar\" name=\"file\" :show-file-list=\"false\" :on-success=\"handleAvatarSuccess\" :before-upload=\"beforeAvatarUpload\">\r\n                    <label class=\"user-name\">上传新头像：</label>\r\n                    <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\">\r\n                     <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n                </el-upload>\r\n                <div class=\"name\">\r\n                    <label class=\"user-name\">用户名：</label>\r\n                    <div class=\"name-content\">\r\n                        <div class=\"el-input\">\r\n                            <input autocomplete=\"off\" placeholder=\"你的昵称\" type=\"text\" maxlength=\"6\" validateevent=\"true\" v-model=\"individual.nick_name\"\r\n                                class=\"el-input__inner\">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"email\">\r\n                    <label class=\"user-email\">邮箱：</label>\r\n                    <div class=\"email-content\">\r\n                        <div class=\"el-input\">\r\n                            {{individual.email}}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"phone\">\r\n                    <label class=\"user-phone\">手机号：</label>\r\n                    <div class=\"phone-content\">\r\n                        <div class=\"el-input\">\r\n                            <input autocomplete=\"off\" placeholder=\"你的手机号\" type=\"text\" maxlength=\"6\" validateevent=\"true\" v-model=\"individual.phone_num\"\r\n                                class=\"el-input__inner\">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <!--\r\n                <div class=\"school\">\r\n                    <label class=\"user-school\">就读学校：</label>\r\n                    <div class=\"school-content\">\r\n                        <div class=\"el-input\">\r\n                            <input autocomplete=\"off\" placeholder=\"你的学校\" type=\"text\" maxlength=\"6\" validateevent=\"true\"\r\n                                class=\"el-input__inner\">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                -->\r\n                <!--\r\n                <div class=\"ID\">\r\n                    <label class=\"user-ID\">学号：</label>\r\n                    <div class=\"ID-content\">\r\n                        <div class=\"el-input\">\r\n                            <input autocomplete=\"off\" placeholder=\"你的学号\" type=\"text\" maxlength=\"6\" validateevent=\"true\"\r\n                                class=\"el-input__inner\">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                -->\r\n                <div class=\"save\">\r\n                    <button type=\"button\" class=\"btn\" @click=\"Update\">\r\n                        <span>保存</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n</template>\r\n<script>\r\nimport ElementUI from 'element-ui'\r\nimport axios from 'axios'\r\nexport default {\r\n    data() {\r\n        return {\r\n            individual: {},\r\n            imageUrl: '',\r\n            header: {\r\n                'Authorization': 'Bearer:'+localStorage.getItem('zhigui-token'),\r\n            },\r\n        }\r\n    },\r\n    mounted: function(){\r\n        var pointer=this\r\n            axios.get('/api/v1/user/info').then(function (response) {\r\n                console.log(response)\r\n                if(response.status==200)\r\n                {\r\n                    pointer.individual=response.data.data\r\n                }else {\r\n                    pointer.$message(response.data.error);\r\n                    ElementUI.Message({  \r\n                    message: response.data.error,\r\n                    })\r\n                    console.log(response)\r\n                }\r\n                })\r\n            .catch(function (error) {\r\n    console.log(error);\r\n  });\r\n    },\r\n    methods: {\r\n      handleAvatarSuccess(res, file) {\r\n        this.imageUrl = URL.createObjectURL(file.raw);\r\n        alert('上传成功!')\r\n      },\r\n      beforeAvatarUpload(file) {\r\n        const isLt2M = file.size / 1024 / 1024 < 2;\r\n        if (!isLt2M) {\r\n          this.$message.error('上传头像图片大小不能超过 2MB!');\r\n        }\r\n        return isLt2M;\r\n      },\r\n      Update() {\r\n        var pointer=this\r\n            axios.post('/api/v1/user/info',this.individual).then(function (response) {\r\n                console.log(response)\r\n                if(response.status==200)\r\n                {\r\n                    alert('修改成功!')\r\n                    pointer.$router.push('/individual');\r\n\r\n                }else {\r\n                    pointer.$message(response.data.error);\r\n                    ElementUI.Message({  \r\n                    message: response.data.error,\r\n                    })\r\n                    console.log(response)\r\n                }\r\n                })\r\n            .catch(function (error) {\r\n    console.log(error);\r\n  });\r\n      },\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n@import '../assets/css/update_individual.css';\r\n#update_individual .avatar-uploader .el-upload {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n#update_individual .avatar-uploader .el-upload:hover {\r\n    border-color: #409EFF;\r\n  }\r\n#update_individual .avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 178px;\r\n    height: 178px;\r\n    line-height: 178px;\r\n    text-align: center;\r\n  }\r\n#update_individual .avatar {\r\n    width: 178px;\r\n    height: 178px;\r\n    display: block;\r\n  }\r\n</style>"]},"metadata":{},"sourceType":"module"}